<ui:composition template="index.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	<ui:define name="content">


	<h:form>

		<p:panel>
			<p:remoteCommand
				action="#{uploadImageView.setCurrentUserId(userLoginView.authorizedUser.id)}"
				autoRun="true" />

			<p:growl id="msgs" showDetail="true" />

			<h:panelGrid column="2" id="status">
				<p:graphicImage width="75" height="100" value="#{MAPPINGS.APPLICATION_AVATAR_IMAGES_PATH}#{userLoginView.authorizedUser.avatarImage}" />
				<h:outputText value="#{uploadImageView.tempImageName}" />
			</h:panelGrid>

			<p:fileUpload
				fileUploadListener="#{uploadImageView.handleFileUpload}"
				widgetVar="uploader" mode="advanced"
				update="msgs status" sizeLimit="10000000"
				allowTypes="/(\.|\/)(gif|jpe?g|png)$/" auto="true"
				oncomplete="PF('crop').jq.click();" />

			<p:commandButton widgetVar="crop" value="Crop" icon="ui-icon-extlink"
				actionListener="#{cropperView.viewCropper}"
				disabled="#{uploadImageView.tempImageName == null}"
				style="display:none" />

		</p:panel>

	</h:form>
	<h:outputScript library="js" name="jquery-ui/jquery-ui.js" />

	</ui:define>
</ui:composition>